{% extends 'dashboard/main.html' %}

{% block content %}
<div class="main-content">
  <section class="section">
    <div class="section-body">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h4>Order Details</h4>
            </div>
            <div class="card-body">
              <form method="post">
                {% csrf_token %}
                <!-- Order and Product Information -->
                <div class="form-group">
                  <label>Order ID</label>
                  <input type="text" class="form-control" value="{{ order.id }}" readonly>
                </div>
                <div class="row mb-4">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Product</label>
                      <input type="text" class="form-control" value="{{ order.product.taitle }}" readonly>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label>Product Image</label>
                    <div class="product-image-container" style="max-width: 200px;">
                      {% with main_image=order.product.productimage_set.first %}
                        {% if main_image %}
                          <img src="{{ main_image.image.url }}" alt="{{ order.product.taitle }}" class="img-fluid rounded">
                        {% else %}
                          <div class="text-muted">No image available</div>
                        {% endif %}
                      {% endwith %}
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label>Quantity</label>
                  <input type="text" class="form-control" value="{{ order.quintity }}" readonly>
                </div>
                <div class="form-group">
                  <label>Size</label>
                  <input type="text" class="form-control" value="{{ order.size }}" readonly>
                </div>
                <div class="form-group">
                  <label>Date</label>
                  <input type="text" class="form-control" value="{{ order.date }}" readonly>
                </div>
                <!-- Delivery Information -->
                <h5>Delivery Information</h5>
                <div class="form-group">
                  <label>Name</label>
                  <input type="text" class="form-control" value="{{ order.name }}" readonly>
                </div>
                <div class="form-group">
                  <label>Company Name</label>
                  <input type="text" class="form-control" value="{{ order.companyname }}" readonly>
                </div>
                <div class="form-group">
                  <label>Country</label>
                  <input type="text" class="form-control" value="{{ order.country }}" readonly>
                </div>
                <div class="form-group">
                  <label>Home Address</label>
                  <input type="text" class="form-control" value="{{ order.home_address }}" readonly>
                </div>
                <div class="form-group">
                  <label>Home Address 2</label>
                  <input type="text" class="form-control" value="{{ order.home_address2 }}" readonly>
                </div>
                <div class="form-group">
                  <label>Town</label>
                  <input type="text" class="form-control" value="{{ order.town }}" readonly>
                </div>
                <div class="form-group">
                  <label>Postcode</label>
                  <input type="text" class="form-control" value="{{ order.postcode }}" readonly>
                </div>
                <div class="form-group">
                  <label>Phone</label>
                  <input type="text" class="form-control" value="{{ order.phone }}" readonly>
                </div>
                <div class="form-group">
                  <label>Email</label>
                  <input type="text" class="form-control" value="{{ order.email }}" readonly>
                </div>
                <!-- Order Status -->
                <div class="form-group">
                  <label>Status</label>
                  <select class="form-control" name="status">
                    {% for choice in status_choices %}
                      <option value="{{ choice.0 }}" {% if order.status == choice.0 %}selected{% endif %}>{{ choice.1 }}</option>
                    {% endfor %}
                  </select>
                </div>
                <button type="submit" class="btn btn-primary">Save changes</button>
                <a href="{% url 'orders' %}" class="btn btn-secondary">Cancel</a>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}
